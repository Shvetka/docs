орректные способы восстановления
Вариант 1
// сделать копию сетевой папки с резервными копиями в другую сетевую или локальную папку
// настроить wal-g на эту папку
// * остановить службу, очистить каталог БД
// восстановить базу из резервной копии
// добавить файл recovery.signal в каталог БД
// запустить службу

Вариант 2 (очень внимательно)
// настроить wal-g на сетевую папку (где и исходный файл)
// * остановить службу, очистить каталог БД
// восстановить базу из бэкапа
// добавить файл standby.signal в каталог БД
// запустить службу (запустится в режиме ожидания, и archive_command неактивен, а restore_command сработал)
// остановить службу
// перенастроить архивирование wal или в другой каталог, или отключить
// запустить службу и перевести в режим мастера (или удалить standby.signal и запустить службу)

Вариант 3
// настроить wal-g на сетевую папку (где находится исходный файл)
// * остановить службу, очистить каталог БД
// восстановить базу из бэкапа
// добавить файл recovery.signal в каталог БД
// задать archive_command='' (не отключая archive_mode)
// запустить службу (archive_command неактивен, а restore_command сработал)
// далее можно перенастроить архивирование wal или в другой каталог или отключить

Вариант 4 (когда нет архивов wal)
// настроить wal-g на сетевую папку или другую (где находится архив)
// * остановить службу, очистить каталог БД
// восстановить базу из бэкапа
// удалить файл backup_label в каталоге БД
// задать archive_mode='off'
// выполнить / pg_resetwal -D $PGDATA -f / // запустить службу
// (это грубый способ восстановления, когда нет выхода)

Внимательно просматриваем логи или первый вход в psql, если на хостах разные версии Linux

WARNING:  database "postgres" has a collation version mismatch
ПОДРОБНОСТИ:  The database was created using collation version 153.120.42, but the operating system provides version 153.121.44.8.
ПОДСКАЗКА:  Rebuild all objects in this database that use the default collation and run ALTER DATABASE postgres REFRESH COLLATION VERSION, or build PostgreSQL with the right library version.



  https://github.com/Zikon328/pg-times/tree/main/WAL-G#восстановление
